import{a as c,c as M,e as y}from"./chunk-3SYVYTXG.js";import{$a as n,Aa as l,Ab as E,Ja as h,O as x,Oa as u,T as v,U as b,Va as p,Vb as S,Xb as O,_a as i,_b as P,ab as s,fb as f,jb as _,kb as o,mb as d,vb as C,wb as I}from"./chunk-C5O2SOKF.js";var g=class r{constructor(t){this.http=t}apiUrl=y.api_orquestador+"/usuarios";getUserById(t,e){let a=new c({Authorization:`Bearer ${e}`,usuario_id:t.toString()}),m=`${this.apiUrl}/${t}`;return console.log("[UsuariosService] GET usuario por ID"),console.log("URL:",m),console.log("Headers:",a),this.http.get(m,{headers:a})}updateUser(t,e,a){let m=new c({Authorization:`Bearer ${a}`,usuario_id:t.toString()});return this.http.put(`${this.apiUrl}/${t}`,e,{headers:m})}deleteUser(t,e){let a=new c({Authorization:`Bearer ${e}`,usuario_id:t.toString()});return this.http.delete(`${this.apiUrl}/${t}`,{headers:a})}updateAddress(t,e,a){let m=new c({Authorization:`Bearer ${a}`,usuario_id:t.toString()});return this.http.post(`${this.apiUrl}/${t}/address`,e,{headers:m})}static \u0275fac=function(e){return new(e||r)(v(M))};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})};function D(r,t){if(r&1&&(i(0,"div",3)(1,"h2"),s(2,"i",4),o(3),n(),i(4,"div",5)(5,"div",6),s(6,"i",7),i(7,"strong"),o(8,"Nombre:"),n(),o(9),n(),i(10,"div",6),s(11,"i",8),i(12,"strong"),o(13,"Email:"),n(),o(14),n(),i(15,"div",6),s(16,"i",9),i(17,"strong"),o(18,"Tel\xE9fono:"),n(),o(19),n(),i(20,"div",6),s(21,"i",10),i(22,"strong"),o(23,"Direcci\xF3n:"),n(),o(24),n(),i(25,"div",6),s(26,"i",11),i(27,"strong"),o(28,"Rol:"),n(),o(29),n(),i(30,"div",6),s(31,"i",12),i(32,"strong"),o(33,"Miembro desde:"),n(),o(34),C(35,"date"),n()(),i(36,"div",13)(37,"button",14),s(38,"i",15),o(39," Editar Perfil "),n()()()),r&2){let e=f();l(3),d(" Bienvenido, ",e.user.name," \u{1F44B}"),l(6),d(" ",e.user.name," "),l(5),d(" ",e.user.mail," "),l(5),d(" ",e.user.telefono," "),l(5),d(" ",e.user.usrdir||"No especificada \u{1F3DA}\uFE0F"," "),l(5),d(" ",e.user.rol," "),l(5),d(" ",I(35,7,e.user.fecha_creacion)," ")}}function $(r,t){r&1&&(i(0,"div",18),s(1,"i",19),o(2," Cargando perfil... "),n())}function k(r,t){if(r&1&&(i(0,"div",20),s(1,"i",21),o(2),n()),r&2){let e=f(2);l(2),d(" ",e.errorMessage," ")}}function z(r,t){if(r&1&&u(0,$,3,0,"div",16)(1,k,3,1,"div",17),r&2){let e=f();p("ngIf",e.loading),l(),p("ngIf",!e.loading&&e.errorMessage)}}var U=class r{usuarioService=b(g);user=null;errorMessage=null;loading=!0;ngOnInit(){let t=localStorage.getItem("token"),e=localStorage.getItem("usuario_id");t&&e?this.usuarioService.getUserById(+e,t).subscribe({next:a=>{this.user=a,this.loading=!1},error:a=>{this.errorMessage="No se pudo cargar la informaci\xF3n del perfil",console.error("Error al obtener el usuario:",a),this.loading=!1}}):(this.errorMessage="No se encontr\xF3 sesi\xF3n activa.",this.loading=!1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["profile"]],decls:4,vars:2,consts:[["loadingOrError",""],[1,"mt-24"],["class","profile-container",4,"ngIf","ngIfElse"],[1,"profile-container"],[1,"fa-solid","fa-user-circle"],[1,"profile-card"],[1,"profile-item"],[1,"fa-solid","fa-id-card"],[1,"fa-solid","fa-envelope"],[1,"fa-solid","fa-phone"],[1,"fa-solid","fa-location-dot"],[1,"fa-solid","fa-user-tag"],[1,"fa-solid","fa-calendar-check"],[1,"profile-actions"],[1,"edit-btn"],[1,"fa-solid","fa-pen-to-square"],["class","loading-msg",4,"ngIf"],["class","error",4,"ngIf"],[1,"loading-msg"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"error"],[1,"fa-solid","fa-triangle-exclamation"]],template:function(e,a){if(e&1&&(i(0,"div",1),u(1,D,40,9,"div",2)(2,z,2,2,"ng-template",null,0,E),n()),e&2){let m=_(3);l(),p("ngIf",!a.loading&&a.user)("ngIfElse",m)}},dependencies:[P,S,O],styles:[".profile-container[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:2rem;background:#f4f4f4;border-radius:8px;box-shadow:0 2px 10px #0000001a}.profile-item[_ngcontent-%COMP%]{margin-bottom:12px;font-size:16px}h2[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}.error[_ngcontent-%COMP%]{color:red;text-align:center;margin-top:2rem}.profile-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;background:linear-gradient(to right,#f0f0f0,#fafafa);border-radius:12px;box-shadow:0 4px 20px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#333;margin-bottom:1.5rem}.profile-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.profile-item[_ngcontent-%COMP%]{font-size:16px;display:flex;align-items:center;gap:.5rem}.profile-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#555;min-width:20px}.profile-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}.edit-btn[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;font-size:16px;padding:10px 20px;border-radius:8px;cursor:pointer;transition:background-color .3s ease}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.error[_ngcontent-%COMP%]{color:#ff4d4d;text-align:center;margin-top:2rem;font-weight:700}.loading-msg[_ngcontent-%COMP%]{text-align:center;font-style:italic;font-size:18px;color:#666}"]})};export{U as ProfileComponent};
