import{Hb as s,Ib as m,O as n,a as o,b as a,j as c,ma as u}from"./chunk-C5O2SOKF.js";var f=class d{storageKey="app_cart_items";loadCartFromStorage(){let t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}cart=u(this.loadCartFromStorage());total=s(()=>this.cart().reduce((t,r)=>t+r.precio*r.quantity,0));hideCart=u(!0);cartBounce$=new c;constructor(){m(()=>{localStorage.setItem(this.storageKey,JSON.stringify(this.cart()))})}toggleCartVisibility(){this.hideCart.update(t=>!t)}hideCartVisivility(){this.hideCart.set(!0)}resetCartVisibility(){this.hideCart.set(!0)}addProductWithOverlay(t,r){this.addProduct(t),r(!0),setTimeout(()=>{r(!1)},1500)}addProduct(t){this.cart.update(r=>r.find(i=>i.id_producto===t.id_producto)?r.map(i=>i.id_producto===t.id_producto?a(o({},i),{quantity:i.quantity+1}):i):[...r,a(o({},t),{quantity:1})]),this.cartBounce$.next()}removeProduct(t){this.cart.update(r=>r.filter(e=>e.id_producto!==t.id_producto))}increaseQuantity(t){this.cart.update(r=>r.map(e=>e.id_producto===t?a(o({},e),{quantity:e.quantity+1}):e))}decreaseQuantity(t){this.cart.update(r=>{let e=r.find(i=>i.id_producto===t);return e?e.quantity<=1?r.filter(i=>i.id_producto!==t):r.map(i=>i.id_producto===t?a(o({},i),{quantity:i.quantity-1}):i):r})}static \u0275fac=function(r){return new(r||d)};static \u0275prov=n({token:d,factory:d.\u0275fac,providedIn:"root"})};export{f as a};
